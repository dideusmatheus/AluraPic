<!-- 55A- formulario de singup , depois vá ate aap.routing pra fazer a rota do singup -->
<h4 class="text-center mt-3"> Register to embrace a new world!</h4>

<!-- 55G- fazer a ligação com as validações feita no singup.ts (utilizando primeiro o [formGroup]="singupForm", depois para cada input o formControlName="email" ) -->
<form [formGroup]="singupForm" (submit)="singup()" class="form mt-4" >

  <!-- input email -->
  <div class="form-group mx-2 mb-3">
    <!-- 59F- incluindo o #inputEmail para fazer o focus, vá para singup.ts -->
    <input #emailInput formControlName="email" placeholder="email" class="form-control" autofocus>
    <!-- 55H- manda a mensagem para cada validação feita no singup.ts -->
    <app-vmessagem text="Email is required!" *ngIf="singupForm.get('email').errors?.['required']"></app-vmessagem> <!-- Validators.required -->
    <app-vmessagem text="Invalid e-mail!" *ngIf="singupForm.get('email').errors?.['email']"></app-vmessagem> <!-- Validators.email -->
  </div>

  <!-- input fullName -->
  <div class="form-group mx-2 mb-3">
    <input formControlName="fullName" placeholder="full name" class="form-control">
    <!-- 55H- manda a mensagem para cada validação feita no singup.ts -->
    <app-vmessagem text="Full name is required!" *ngIf="singupForm.get('fullName').errors?.['required']"></app-vmessagem> <!-- Validators.required -->
    <app-vmessagem text="Minimum length is 2!" *ngIf="singupForm.get('fullName').errors?.['minlength']"></app-vmessagem> <!-- Validators.minLength(2) -->
    <app-vmessagem text="Maximum length is 40!" *ngIf="singupForm.get('fullName').errors?.['maxlength']"></app-vmessagem> <!-- Validators.maxLength(40) -->
  </div>

  <!-- input userName -->
  <div class="form-group mx-2 mb-3">
    <input formControlName="userName" placeholder="user name" class="form-control">
    <!-- 55H- manda a mensagem para cada validação feita no singup.ts -->
    <app-vmessagem text="User name is required!" *ngIf="singupForm.get('userName').errors?.['required']">
    </app-vmessagem> <!-- Validators.required -->
    <!-- <app-vmessagem text="Must be lower case!" *ngIf="singupForm.get('userName').errors?.['pattern']"></app-vmessagem> Validators.pattern(/^[a-z0-9_\-]+$/) -->
    <!-- 55I- sera criado a validação na mão, para isso vá ate lower-case.validators.ts -->
    <app-vmessagem text="Must be lower case!" *ngIf="singupForm.get('userName').errors?.['lowerCase']"></app-vmessagem>
    <app-vmessagem text="Minimum length is 2!" *ngIf="singupForm.get('userName').errors?.['minlength']"></app-vmessagem> <!-- Validators.minLength(2) -->
    <app-vmessagem text="Maximum length is 30!" *ngIf="singupForm.get('userName').errors?.['maxlength']"></app-vmessagem> <!-- Validators.maxLength(30) -->
    <!-- 57G- mensagem para validação se o usuario ja exite no banco de dados -->
    <app-vmessagem text="Username already taken" *ngIf="singupForm.get('userName').errors?.['userNameTaken']"> </app-vmessagem>
    <small *ngIf="singupForm.get('userName').valid" class="text-success">User available</small>   
  </div>

  <!-- input password -->
  <div class="form-group mx-2 mb-3">
    <input formControlName="password" type="password" placeholder="password" class="form-control">
    <!-- 55H- manda a mensagem para cada validação feita no singup.ts -->
    <app-vmessagem text="Password is required!" *ngIf="singupForm.get('password').errors?.['required']"></app-vmessagem> <!-- Validators.required -->
    <app-vmessagem text="Minimum length is 6!" *ngIf="singupForm.get('password').errors?.['minlength']"></app-vmessagem> <!-- Validators.minLength(6) -->
    <app-vmessagem text="Maximum length is 20!" *ngIf="singupForm.get('password').errors?.['maxlength']"></app-vmessagem> <!-- Validators.maxLength(20) -->
  </div>

  <!-- button register -->
  <div class="d-grid gap-2">
    <!-- 55H- botao desabilitado ate todos os campos estiverem certos -->
    <!-- 57H- quando fazemos uma validação assincrona devemos testar se há valiação pendente, usando o  || singupForm.pending, 
    feito isso vamos fazer o metodo singup no singup.component.ts -->
    <button [disabled]="singupForm.invalid || singupForm.pending" class="btn btn-primary mx-2 mb-3">Register</button>
  </div>

  <!-- text -->
  <p class="mx-3">Already a user?<a [routerLink]="['']"> Sign In!</a></p>
</form>
